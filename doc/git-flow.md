# Git運用ルール

## 概要
このドキュメントは、ポートフォリオサイトプロジェクトにおけるGitの運用ルールを定義します。

---

## 1. ブランチ戦略

### 1.1 ブランチ構成
```
main (本番環境)
├── develop (開発環境)
├── feature/機能名 (機能開発)
├── fix/修正内容 (バグ修正)
└── hotfix/緊急修正 (緊急修正)
```

### 1.2 ブランチ命名規則
- **機能開発**: `feature/機能名`
  - 例: `feature/blog-api`, `feature/user-authentication`
- **バグ修正**: `fix/修正内容`
  - 例: `fix/cors-setting`, `fix/login-error`
- **緊急修正**: `hotfix/修正内容`
  - 例: `hotfix/security-vulnerability`

### 1.3 ブランチ保護
- `main`ブランチ: 直接プッシュ禁止、PR必須
- `develop`ブランチ: 直接プッシュ禁止、PR必須

---

## 2. コミットメッセージ規約

### 2.1 基本形式
```
type(scope): description

[optional body]

[optional footer]
```

### 2.2 絵文字の使用（推奨）
コミットメッセージの可読性と視認性を向上させるため、タイプに応じた絵文字の使用を推奨します。

#### 2.2.1 絵文字一覧
- **✨ feat**: 新機能追加
- **🐛 fix**: バグ修正
- **📚 docs**: ドキュメントのみの変更
- **💄 style**: コードの意味に影響しない変更（空白、フォーマット等）
- **♻️ refactor**: バグ修正や機能追加ではないコードの変更
- **🧪 test**: テストの追加や修正
- **🔧 chore**: ビルドプロセスや補助ツールの変更
- **🚀 perf**: パフォーマンス改善
- **🔥 remove**: ファイル削除
- **🔒 security**: セキュリティ関連の修正
- **🎉 init**: 初期コミット
- **📦 build**: ビルド関連の変更
- **🚨 ci**: CI/CD関連の変更
- **🎨 ui**: UI/UX関連の変更

#### 2.2.2 絵文字付きコミットメッセージ例
```
✨ feat(api): ブログ記事新規作成APIを実装
🐛 fix(cors): フロントエンドからのAPIアクセスを許可
📚 docs(readme): セットアップ手順を追加
♻️ refactor(auth): JWT認証の実装を改善
🧪 test(api): ブログAPIのテストケースを追加
🔧 chore(deps): 依存関係を更新
🚀 perf(frontend): 画像読み込みを最適化
🔒 security(auth): パスワードハッシュ化を強化
```

### 2.3 タイプ一覧
- **feat**: 新機能
- **fix**: バグ修正
- **docs**: ドキュメントのみの変更
- **style**: コードの意味に影響しない変更（空白、フォーマット等）
- **refactor**: バグ修正や機能追加ではないコードの変更
- **test**: テストの追加や修正
- **chore**: ビルドプロセスや補助ツールの変更

### 2.4 スコープ例
- `api`: API関連
- `frontend`: フロントエンド関連
- `backend`: バックエンド関連
- `auth`: 認証関連
- `ui`: UI/UX関連

### 2.5 コミットメッセージ例
```
feat(api): ブログ記事新規作成APIを実装
fix(cors): フロントエンドからのAPIアクセスを許可
docs(readme): セットアップ手順を追加
refactor(auth): JWT認証の実装を改善
```

---

## 3. プルリクエスト（PR）ルール

### 3.1 PR作成時のチェックリスト
- [ ] ブランチ名が命名規則に従っている
- [ ] コミットメッセージが規約に従っている
- [ ] 変更内容の説明が十分である
- [ ] テストが追加・更新されている
- [ ] ドキュメントが更新されている（必要に応じて）

### 3.2 PRテンプレート
```markdown
## 概要
このPRで実装した内容を簡潔に説明してください。

## 変更内容
- 変更点1
- 変更点2
- 変更点3

## テスト
- [ ] 単体テスト
- [ ] 統合テスト
- [ ] 手動テスト

## 関連Issue
Closes #123

## スクリーンショット（UI変更がある場合）
```

### 3.3 レビュールール
- 最低1名のレビュー承認が必要
- レビューコメントは建設的であること
- 承認後はレビュアーがマージする

---

## 4. 開発フロー

### 4.1 通常の開発フロー
1. `develop`ブランチから作業ブランチを作成
2. 機能開発・修正を実施
3. コミット・プッシュ
4. PRを作成
5. レビュー・承認
6. `develop`ブランチにマージ
7. 作業ブランチを削除

### 4.2 リリースフロー
1. `develop`ブランチの内容を`main`ブランチにマージ
2. リリースタグを作成（例: `v1.0.0`）
3. リリースノートを作成

### 4.3 緊急修正フロー
1. `main`ブランチから`hotfix`ブランチを作成
2. 緊急修正を実施
3. `main`ブランチと`develop`ブランチの両方にマージ
4. リリースタグを作成

---

## 5. ファイル管理

### 5.1 .gitignore
- 環境変数ファイル（`.env`）
- 仮想環境ディレクトリ（`venv/`, `node_modules/`）
- ログファイル（`log/`）
- 証跡ファイル（`evidence/`）
- メディアファイル（`media/`）

### 5.2 大容量ファイル
- 画像ファイルは適切なサイズに圧縮
- 動画ファイルは必要最小限に抑制
- 必要に応じてGit LFSの使用を検討

### 5.3 機密情報
- APIキー、パスワード等は絶対にコミットしない
- 環境変数は`.env.example`でテンプレートを提供
- 本番環境の設定は別途管理

---

## 6. バージョン管理

### 6.1 セマンティックバージョニング
- **メジャー**: 後方互換性のない変更（`1.0.0` → `2.0.0`）
- **マイナー**: 後方互換性のある新機能追加（`1.0.0` → `1.1.0`）
- **パッチ**: 後方互換性のあるバグ修正（`1.0.0` → `1.0.1`）

### 6.2 タグ命名規則
- リリースタグ: `v1.0.0`, `v1.1.0`
- プレリリース: `v1.0.0-alpha.1`, `v1.0.0-beta.1`

---

## 7. チーム協業

### 7.1 コミュニケーション
- レビューコメントは具体的で建設的であること
- 質問や相談は積極的に行う
- ブロッカーがある場合は早期に報告

### 7.2 権限管理
- リポジトリ管理者: ブランチ保護設定、権限管理
- 開発者: 通常の開発作業、PR作成・レビュー
- レビュアー: コードレビュー、マージ権限

---

## 8. ツール・CI/CD

### 8.1 使用ツール
- **リポジトリ**: GitHub
- **CI/CD**: GitHub Actions
- **コード品質**: ESLint, Prettier（フロントエンド）

### 8.2 CI/CDパイプライン
1. **テスト**: 自動テスト実行
2. **Lint**: コード品質チェック
3. **ビルド**: アプリケーションのビルド
4. **デプロイ**: 開発環境への自動デプロイ

---

## 9. トラブルシューティング

### 9.1 よくある問題と対処法
- **コンフリクト**: 早期に解決、必要に応じてチームで相談
- **誤コミット**: `git revert`で取り消し
- **強制プッシュ**: 共有ブランチでは絶対に使用しない

### 9.2 緊急時の対応
- 本番環境の問題: 即座に`hotfix`ブランチで対応
- セキュリティ問題: 最優先で対応、必要に応じてリポジトリを一時停止

---

## 10. 更新履歴

| 日付 | バージョン | 変更内容 | 更新者 |
|------|------------|----------|--------|
| 2025-06-29 | 1.0.0 | 初版作成 | チーム |

---

## 注意事項
- このルールはプロジェクトの進行に応じて随時更新します
- 不明な点がある場合は、チームで相談して決定してください
- ルールの改善提案は積極的に受け付けます 